# Maintainer: Shatur95 <genaloner@gmail.com>

pkgname=crow-translate
pkgver=4.0.2
pkgrel=3
pkgdesc='Application that allows you to translate and speak text'
arch=(x86_64 aarch64)
url=https://apps.kde.org/crowtranslate/
license=(GPL-3.0-or-later)
depends=(qt6-base qt6-svg qt6-multimedia tesseract qt6-scxml qt6-speech onnxruntime)
makedepends=(qt6-tools extra-cmake-modules kwayland espeak-ng protobuf)
optdepends=(
  'kwayland: find and use KWayland library for better Wayland integration.' 
  'espeak-ng: for Piper phonemization.'
)
source=(https://download.kde.org/stable/crow-translate/$pkgver/crow-translate-$pkgver.tar.gz)
sha256sums=('e24b8e78b0bffa5dd02875e25126c371967f53729102c784e4e02d165feb3753')

build() {
  cd $pkgname
  mkdir build
  cd build
  cmake -D WITH_KWAYLAND=ON -D WITH_PIPER_TTS=ON -D CMAKE_INSTALL_PREFIX="$pkgdir/usr" ..
  cmake --build .
}

package() {
  cd $pkgname
  cmake --install build
  rm -f "${pkgdir}/usr/share/icons/hicolor/icon-theme.cache"
} 
