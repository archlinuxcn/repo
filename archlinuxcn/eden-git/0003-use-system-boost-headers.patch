From 57d74097a6a09d16809b3e26a19f0e36eafd4a7b Mon Sep 17 00:00:00 2001
From: sukanka <su975853527@gmail.com>
Date: Wed, 4 Jun 2025 20:18:22 +0800
Subject: [PATCH 3/4] use system boost headers

add option to allow system-wide boost headers.

1	0	CMakeLists.txt
3	1	externals/CMakeLists.txt

diff --git a/CMakeLists.txt b/CMakeLists.txt
index b328c3f41e..957ef7b907 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -308,6 +308,7 @@ set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_BINARY_DIR}/bin)
 # =======================================================================
 
 # Enforce the search mode of non-required packages for better and shorter failure messages
+find_package(Boost REQUIRED context)
 find_package(enet 1.3 MODULE)
 find_package(fmt 8 REQUIRED)
 find_package(LLVM MODULE COMPONENTS Demangle)
diff --git a/externals/CMakeLists.txt b/externals/CMakeLists.txt
index fd3f54ae4f..754800ed16 100644
--- a/externals/CMakeLists.txt
+++ b/externals/CMakeLists.txt
@@ -161,7 +161,9 @@ if (YUZU_USE_EXTERNAL_VULKAN_UTILITY_LIBRARIES)
 endif()
 
 # Boost headers
-add_subdirectory(boost-headers)
+if (YUZU_USE_EXTERNAL_BOOST_HEADERS)
+    add_subdirectory(boost-headers)
+endif()
 
 # TZDB (Time Zone Database)
 add_subdirectory(nx_tzdb)
-- 
2.49.0

