# Maintainer: Kimiblock Moe

pkgname=delfin-portable
pkgver=0.4.8
pkgrel=2
epoch=1
pkgdesc="Delfin video player. Sandboxed to prevent dGPU wakeups."
arch=('x86_64')
url="https://github.com/Kraftland/portable"
license=('GPL-3.0-or-later')
groups=()
provides=(delfin)
options=(!debug !strip)
conflicts=(delfin)

optdepends=()

makedepends+=(delfin portable)

checkdepends=()

source=(
	portable-config
	cafe.avery.Delfin.desktop
)


md5sums=('f3884c17614670b0c790af7a08dc5fd3'
         '2f5b7f6d9ddd0dd61e9d4f9bbaa27580')
function package() {
	depends=("portable" 'mpv' 'libadwaita' 'gtk4')

	install -vDm755 /usr/bin/delfin -t "${pkgdir}"/usr/lib/portable/overlay-usr
	export pkgdir
	export pkgname
	export srcdir
	portable-packer \
		-v \
		--distro arch \
		--mode copy delfin \
		--hash true \
		--config "${srcdir}/portable-config" \
		--desktop-file "${srcdir}/cafe.avery.Delfin.desktop"
}
