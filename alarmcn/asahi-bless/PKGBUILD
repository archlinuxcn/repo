# Maintainer: Jos Dehaes <jos.dehaes@gmail.com>
# Maintainer: Matthias Kurz <m.kurz@irregular.at>

pkgname=asahi-bless
pkgver=0.4.3
pkgrel=1
pkgdesc='Tool to select active boot partition on ARM Macs'
arch=('aarch64')
url="https://crates.io/crates/$pkgname"
depends=('rust' 'cargo')
license=('MIT')
source=(
  "asahi-bless-${pkgver}.tar.gz::https://crates.io/api/v1/crates/asahi-bless/${pkgver}/download"
)
sha256sums=('2fcbd445baa294ad484b93f7039955e5baadddc6902151c73cac1aa6778f544b')

build() {
  cd "${srcdir}/$pkgname-${pkgver}"
  cargo build --release --locked
}

package() {
  cd "${srcdir}/$pkgname-${pkgver}"
  cargo install --locked --path . --root "$pkgdir/usr"
  rm "$pkgdir/usr/".crates*
}
