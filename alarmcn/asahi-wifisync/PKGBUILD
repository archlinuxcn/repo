# Maintainer: Jos Dehaes <jos.dehaes@gmail.com>
# Maintainer: Matthias Kurz <m.kurz@irregular.at>

pkgname=asahi-wifisync
pkgver=0.2.3
pkgrel=1
pkgdesc='Tool to sync Wifi passwords with macos on ARM Macs'
arch=('aarch64')
url="https://crates.io/crates/asahi-wifisync"
makedepends=('rust' 'cargo-license')
license=('MIT')
source=(
  "asahi-wifisync-${pkgver}.tar.gz::https://crates.io/api/v1/crates/asahi-wifisync/${pkgver}/download"
)
sha256sums=('9104ac5567261c2d7a69575cbd51c03c0f86a9d6c9970d97a2b31324d86a3149')

build() {
  cd asahi-wifisync-${pkgver}
  cargo build --release
  cargo license > LICENSE.dependencies
}

package() {
  cd asahi-wifisync-${pkgver}
  install -Dm755 target/release/asahi-wifisync "$pkgdir"/usr/bin/asahi-wifisync
  install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
  install -Dm644 LICENSE.dependencies "$pkgdir"/usr/share/licenses/$pkgname/LICENSE.dependencies
}
