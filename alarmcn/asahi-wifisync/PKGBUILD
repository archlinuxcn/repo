# Maintainer: Jos Dehaes <jos.dehaes@gmail.com>
# Maintainer: Matthias Kurz <m.kurz@irregular.at>

pkgname=asahi-wifisync
pkgver=0.2.2
pkgrel=1
pkgdesc='Tool to sync Wifi passwords with macos on ARM Macs'
arch=('aarch64')
url="https://crates.io/crates/asahi-wifisync"
makedepends=('rust' 'cargo-license')
license=('MIT')
source=(
  "asahi-wifisync-${pkgver}.tar.gz::https://crates.io/api/v1/crates/asahi-wifisync/${pkgver}/download"
)
sha256sums=('b0b54e23f056992a7e63360e7ab962328956a06ba01013afc245874b1ee986d0')

build() {
  cd asahi-wifisync-${pkgver}
  cargo build --release
  cargo license > LICENSE.dependencies
}

package() {
  cd asahi-wifisync-${pkgver}
  install -Dm755 target/release/asahi-wifisync "$pkgdir"/usr/bin/asahi-wifisync
  install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
  install -Dm644 LICENSE.dependencies "$pkgdir"/usr/share/licenses/$pkgname/LICENSE.dependencies
}
