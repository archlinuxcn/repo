From b3f1da88c50585b9986b54681c246e071f4500fc Mon Sep 17 00:00:00 2001
From: Yichao Yu <yyc1992@gmail.com>
Date: Mon, 27 Oct 2025 15:42:12 -0400
Subject: [PATCH 11/17] Removed IsNewDbgInfoFormat field

---
 src/aotcompile.cpp | 2 ++
 src/codegen.cpp    | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/src/aotcompile.cpp b/src/aotcompile.cpp
index 5af783ee72..6e86b7d245 100644
--- a/src/aotcompile.cpp
+++ b/src/aotcompile.cpp
@@ -565,7 +565,9 @@ Function *IRLinker_copyFunctionProto(Module *DstM, Function *SF) {
   auto *F = Function::Create(SF->getFunctionType(), SF->getLinkage(),
                              SF->getAddressSpace(), SF->getName(), DstM);
   F->copyAttributesFrom(SF);
+#if JL_LLVM_VERSION < 210000
   F->IsNewDbgInfoFormat = SF->IsNewDbgInfoFormat;
+#endif
 
   // Remove these copied constants since they point to the source module.
   F->setPersonalityFn(nullptr);
diff --git a/src/codegen.cpp b/src/codegen.cpp
index b9241bb5e9..4adc8ce10a 100644
--- a/src/codegen.cpp
+++ b/src/codegen.cpp
@@ -9901,7 +9901,9 @@ void linkFunctionBody(Function &Dst, Function &Src)
         Dst.setPersonalityFn(Src.getPersonalityFn());
     if (Src.hasPersonalityFn())
         Dst.setPersonalityFn(Src.getPersonalityFn());
+#if JL_LLVM_VERSION < 210000
     assert(Src.IsNewDbgInfoFormat == Dst.IsNewDbgInfoFormat);
+#endif
 
     // Copy over the metadata attachments without remapping.
     Dst.copyMetadata(&Src, 0);
-- 
2.51.2

